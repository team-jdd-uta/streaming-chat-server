# 변경 요청 반영:
# - comment-consumer Docker 이미지 태그를 외부 파일에서 수정 가능하게 함
# - 사용 시 .env로 복사 후 이미지 경로/태그를 원하는 값으로 변경

COMMENT_CONSUMER_IMAGE=hyeonyway/redis-stream-comment-consumer:latest

# 변경 요청 반영:
# - chat-server의 인프라 접속 주소를 외부 파일에서 수정 가능하게 함
CHAT_SERVER_REDIS_CLUSTER_NODES=redis-node-1:7000,redis-node-2:7001,redis-node-3:7002,redis-node-4:7003,redis-node-5:7004,redis-node-6:7005
CHAT_SERVER_STREAM_REDIS_HOST=redis
CHAT_SERVER_STREAM_REDIS_PORT=6379
CHAT_SERVER_ORACLE_URL=jdbc:oracle:thin:@oracle-db:1521/XEPDB1
CHAT_SERVER_ORACLE_USERNAME=SYSTEM
CHAT_SERVER_ORACLE_PASSWORD=mypassword
CHAT_SERVER_MONGO_URI=mongodb://mongodb:27017/commentdb

# WebSocket transport/channel tuning (for high fan-out tests)
CHAT_SERVER_WS_MESSAGE_SIZE_LIMIT=262144
CHAT_SERVER_WS_SEND_BUFFER_SIZE_LIMIT=4194304
CHAT_SERVER_WS_SEND_TIME_LIMIT_MS=120000
CHAT_SERVER_WS_INBOUND_CORE_POOL_SIZE=16
CHAT_SERVER_WS_INBOUND_MAX_POOL_SIZE=128
CHAT_SERVER_WS_INBOUND_QUEUE_CAPACITY=50000
CHAT_SERVER_WS_OUTBOUND_CORE_POOL_SIZE=16
CHAT_SERVER_WS_OUTBOUND_MAX_POOL_SIZE=128
CHAT_SERVER_WS_OUTBOUND_QUEUE_CAPACITY=50000

# Redis listener executor tuning (Pub/Sub consume path)
CHAT_SERVER_REDIS_LISTENER_CORE_POOL_SIZE=8
CHAT_SERVER_REDIS_LISTENER_MAX_POOL_SIZE=64
CHAT_SERVER_REDIS_LISTENER_QUEUE_CAPACITY=20000
CHAT_SERVER_REDIS_SUBSCRIPTION_CORE_POOL_SIZE=4
CHAT_SERVER_REDIS_SUBSCRIPTION_MAX_POOL_SIZE=16
CHAT_SERVER_REDIS_SUBSCRIPTION_QUEUE_CAPACITY=1000

# Server-side fan-out executor/backpressure policy
CHAT_SERVER_FANOUT_TALK_CORE_POOL_SIZE=8
CHAT_SERVER_FANOUT_TALK_MAX_POOL_SIZE=32
CHAT_SERVER_FANOUT_TALK_QUEUE_CAPACITY=10000
CHAT_SERVER_FANOUT_SYSTEM_CORE_POOL_SIZE=2
CHAT_SERVER_FANOUT_SYSTEM_MAX_POOL_SIZE=8
CHAT_SERVER_FANOUT_SYSTEM_QUEUE_CAPACITY=2000
CHAT_SERVER_FANOUT_BACKPRESSURE_POLICY=drop-newest
CHAT_SERVER_FANOUT_BACKPRESSURE_DISCONNECT_COUNT=1
CHAT_SERVER_FANOUT_BACKPRESSURE_DISCONNECT_REASON=Slow consumer backpressure
CHAT_SERVER_FANOUT_TALK_BATCH_ENABLED=true
CHAT_SERVER_FANOUT_TALK_BATCH_MAX_SIZE=20
CHAT_SERVER_FANOUT_TALK_BATCH_MAX_WAIT_MS=20
